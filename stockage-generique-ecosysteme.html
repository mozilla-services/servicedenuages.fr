<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Service de nuages, ">

        <link rel="alternate"  href="http://www.servicedenuages.fr/feeds/all.atom.xml" type="application/atom+xml" title="Service de nuages Full Atom Feed"/>

        <title>Eco-systÃ¨me et stockage gÃ©nÃ©rique // Service de nuages // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pure.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <h5>PubliÃ©</h5>
                <p title="~1995 mots">~8mn de lecture ğŸ•‘</p>
                <p>jeu. 30 avril 2015</p>
                <a href="/">&larr;Liste des articles</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Eco-systÃ¨me et stockage gÃ©nÃ©rique</h1>
                </header>
            </section>
                        <p><a href="http://www.servicedenuages.fr/en/generic-storage-ecosystem">Read the english version</a></p>
            <p><strong>tl;dr Nous devons construire un service de suivi de paiements, et nous
hÃ©sitons Ã  continuer Ã  nous entÃªter avec notre propre solution de
stockage/synchronisation.</strong></p>
<p>Comme nous l'Ã©crivions <a class="reference external" href="http://www.servicedenuages.fr/service-de-nuages">dans l'article prÃ©cÃ©dent</a>, nous souhaitons construire une
solution de stockage gÃ©nÃ©rique. On refait <a class="reference external" href="http://daybed.readthedocs.org">Daybed</a>
chez Mozilla !</p>
<p>Notre objectif est simple: permettre aux dÃ©veloppeurs d'application, internes
Ã  Mozilla ou du monde entier, de faire persister et synchroniser facilement des
donnÃ©es associÃ©es Ã  un utilisateur.</p>
<p id="storage-specs">Les aspects de l'architecture qui nous semblent incontournables:</p>
<ul class="simple">
<li>La solution doit reposer sur un protocole, et non sur une implÃ©mentation ;</li>
<li>L'auto-hÃ©bergement de l'ensemble doit Ãªtre simplissime ;</li>
<li>L'authentification doit Ãªtre <em>pluggable</em>, voire dÃ©centralisÃ©e (OAuth2, FxA,
Persona) ;</li>
<li>Les enregistrements doivent pouvoir Ãªtre validÃ©s par le serveur ;</li>
<li>Les donnÃ©es doivent pouvoir Ãªtre stockÃ©es dans n'importe quel backend ;</li>
<li>Un systÃ¨me de permissions doit permettre de protÃ©ger des collections, ou de
partager des enregistrements de maniÃ¨re fine ;</li>
<li>La rÃ©solution de conflits doit pouvoir avoir lieu sur le serveur ;</li>
<li>Le client doit Ãªtre pensÃ© Â«<em>offline-first</em>Â» ;</li>
<li>Le client doit pouvoir rÃ©concilier les donnÃ©es simplement ;</li>
<li>Le client doit pouvoir Ãªtre utilisÃ© aussi bien dans le navigateur que cÃ´tÃ©
serveur ;</li>
<li>Tous les composants se doivent dÂ´Ãªtre simples et substituables facilement.</li>
</ul>
<p>La premiÃ¨re question qui nous a Ã©tÃ© posÃ©e fÃ»t Â«<em>Pourquoi vous n'utilisez pas
PouchDB ou Remote Storage ?</em>Â»</p>
<div class="section" id="remote-storage">
<h2>Remote Storage</h2>
<p>Remote Storage est un standard ouvert pour du stockage par utilisateur.  <a class="reference external" href="http://tools.ietf.org/html/draft-dejong-remotestorage-04">La
specification</a> se
base sur des standards dÃ©jÃ  existants et Ã©prouvÃ©s:  Webfinger, OAuth 2, CORS et
REST.</p>
<p>L'API est simple, des <a class="reference external" href="http://blog.cozycloud.cc/news/2014/08/12/when-unhosted-meets-cozy-cloud/">projets prestigieux l'utilisent</a>.
Il y a plusieurs <a class="reference external" href="https://github.com/jcoglan/restore">implÃ©mentations</a> du
serveur, et il existe <a class="reference external" href="https://www.npmjs.com/package/remotestorage-server">un squelette Node</a> pour construire un
serveur sur mesure.</p>
<img alt="Remote Storage widget" class="align-left" src="http://www.servicedenuages.fr/images/remotestorage-widget.png" style="width: 243px; height: auto; max-width: 100%;"/>
<p>Le client <a class="reference external" href="https://github.com/remotestorage/remotestorage.js/">remoteStorage.js</a> permet d'intÃ©grer la
solution dans les applications Web.  Il se charge du Â«store localÂ», du cache,
de la synchronization, et fournit un widget qui permet aux utilisateurs des
applications de choisir le serveur qui recevra les donnÃ©es (via Webfinger).</p>
<p><a class="reference external" href="https://github.com/michielbdejong/ludbud">ludbud</a>, la version Ã©purÃ©e de
<em>remoteStorage.js</em>, se limite Ã  l'abstraction du stockage distant.  Cela
permettrait Ã  terme, d'avoir une seule bibliothÃ¨que pour stocker dans un
serveur <em>remoteStorage</em>, <em>ownCloud</em> ou chez les mÃ©chants comme <em>Google Drive</em>
ou <em>Dropbox</em>.</p>
<p>Au premier abord, la spÃ©cification correspond Ã  ce que nous voulons accomplir:</p>
<ul class="simple">
<li>La philosophie du protocole est saine;</li>
<li>L'Ã©co-systÃ¨me est bien fichu;</li>
<li>La vision politique colle: redonner le contrÃ´le des donnÃ©es aux utilisateurs
(voir <a class="reference external" href="http://unhosted.org/">unhosted</a>);</li>
<li>Les choix techniques compatibles avec ce qu'on a commencÃ© (CORS, REST, OAuth 2);</li>
</ul>
<p>En revanche, vis Ã  vis de la manipulation des donnÃ©es, il y a plusieurs
diffÃ©rences avec ce que nous souhaitons faire:</p>
<ul class="simple">
<li>L'API suit globalement une mÃ©taphore Â«fichiersÂ» (dossier/documents), plutÃ´t
que Â«donnÃ©esÂ» (collection/enregistrements) ;</li>
<li>Il n'y a pas de validation des enregistrements selon un schÃ©ma (mÃªme si
<a class="reference external" href="https://remotestorage.io/doc/code/files/baseclient/types-js.html">certaines implÃ©mentations</a> du
protocole le font) ;</li>
<li>Il n'y a pas la possibilitÃ© de trier/filtrer les enregistrements selon des attributs ;</li>
<li>Les permissions <a class="reference external" href="https://groups.google.com/forum/#!topic/unhosted/5_NOGq8BPTo">se limitent Ã  privÃ©/public</a> (et
<a class="reference external" href="https://github.com/remotestorage/spec/issues/58#issue-27249452">l'auteur envisage plutÃ´t un modÃ¨le Ã  la Git</a>) <a class="footnote-reference" href="#id3" id="id1">[1]</a> ;</li>
</ul>
<p>En rÃ©sumÃ©, il semblerait que ce que nous souhaitons faire avec le stockage
d'enregistrements validÃ©s est complÃ©mentaire avec <em>Remote Storage</em>.</p>
<p>Si des besoins de persistence orientÃ©s Â«fichiersÂ» se prÃ©sentent, a priori nous aurions tort
de rÃ©inventer les solutions apportÃ©es par cette spÃ©cification. Il y a donc de grandes
chances que nous lÂ´intÃ©grions Ã  terme, et que <em>Remote Storage</em> devienne une facette
de notre solution.</p>
</div>
<div class="section" id="pouchdb">
<h2>PouchDB</h2>
<p><a class="reference external" href="http://pouchdb.com/">PouchDB</a> est une bibliothÃ¨que JavaScript qui permet
de manipuler des enregistrements en local et de les synchroniser vers une base distante.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PouchDB</span><span class="p">(</span><span class="s1">'dbname'</span><span class="p">);</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">put</span><span class="p">({</span>
 <span class="nx">_id</span><span class="o">:</span> <span class="s1">'dave@gmail.com'</span><span class="p">,</span>
 <span class="nx">name</span><span class="o">:</span> <span class="s1">'David'</span><span class="p">,</span>
 <span class="nx">age</span><span class="o">:</span> <span class="mi">68</span>
<span class="p">});</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">replicate</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">'http://example.com/mydb'</span><span class="p">);</span>
</pre></div>
<p>Le projet a le vent en poupe, bÃ©nÃ©ficie de nombreux contributeurs,
l'Ã©co-systÃ¨me est trÃ¨s riche et l'adoption par des projets <a class="reference external" href="https://github.com/hoodiehq/wip-hoodie-store-on-pouchdb">comme Hoodie</a> ne fait que
confirmer la pertinence de l'outil pour les dÃ©veloppeurs frontend.</p>
<p><em>PouchDB</em> gÃ¨re un Â« store Â» local, dont la persistence est abstraite et <a class="reference external" href="http://pouchdb.com/2014/07/25/pouchdb-levels-up.html">repose
sur</a> l'API <a class="reference external" href="https://github.com/level/levelup#relationship-to-leveldown">LevelDown</a> pour persister
les donnÃ©es dans <a class="reference external" href="https://github.com/Level/levelup/wiki/Modules#storage-back-ends">n'importe quel backend</a>.</p>
<p>MÃªme si <em>PouchDB</em> adresse principalement les besoins des applications
Â«<em>offline-first</em>Â», il peut Ãªtre utilisÃ© aussi bien dans le navigateur que cÃ´tÃ©
serveur, via Node.</p>
<div class="section" id="synchronisation">
<h3>Synchronisation</h3>
<p>La synchronisation (ou rÃ©plication) des donnÃ©es locales s'effectue sur un
<a class="reference external" href="http://couchdb.apache.org/">CouchDB</a> distant.</p>
<p>Le projet <a class="reference external" href="https://github.com/pouchdb/pouchdb-server">PouchDB Server</a>
implÃ©mente l'API de CouchDB en NodeJS. Comme <em>PouchDB</em> est utilisÃ©, on obtient
un service qui se comporte comme un <em>CouchDB</em> mais qui stocke ses donnÃ©es
n'importe oÃ¹, dans un <em>Redis</em> ou un <em>PostgreSQL</em> par exemple.</p>
<p>La synchronisation est complÃ¨te. Autrement dit, tous les enregistrements qui
sont sur le serveur se retrouvent synchronisÃ©s dans le client. Il est possible
de filtrer les collections synchronisÃ©es, mais cela <a class="reference external" href="http://pouchdb.com/2015/04/05/filtered-replication.html">n'a pas pour objectif de
sÃ©curiser l'accÃ¨s aux donnÃ©es</a>.</p>
<p>L'approche recommandÃ©e pour cloisonner les donnÃ©es par utilisateur consiste
Ã  crÃ©er <a class="reference external" href="https://github.com/nolanlawson/pouchdb-authentication#some-people-can-read-some-docs-some-people-can-write-those-same-docs">une base de donnÃ©es par utilisateur</a>.</p>
<p>Ce n'est pas forcÃ©ment un problÃ¨me, CouchDB <a class="reference external" href="https://mail-archives.apache.org/mod_mbox/couchdb-user/201401.mbox/%3C52CEB873.7080404@ironicdesign.com%3E">supporte des centaines de milliers
de bases sans sourciller</a>.
Mais selon les cas d'utilisation, le cloisement n'est pas toujours facile
Ã  dÃ©terminer (par rÃ´le, par application, par collection, ...).</p>
</div>
</div>
<div class="section" id="le-cas-d-utilisation-payments">
<h2>Le cas d'utilisation Â« Payments Â»</h2>
<img alt="Put Payments Here  -- Before the Internet - CC-NC-SA Katy Silberger https://www.flickr.com/photos/katysilbs/11163812186" src="http://www.servicedenuages.fr/images/put-payments.jpg" style="width: 640px; height: auto; max-width: 100%;"/>
<p>Dans les prochaines semaines, nous devrons mettre sur pied un prototype pour
tracer l'historique des paiements et abonnements d'un utilisateur.</p>
<p>Le besoin est simple:</p>
<ul class="simple">
<li>l'application Â« Payment Â» enregistre les paiements et abonnements d'un
utilisateur pour une application donnÃ©e;</li>
<li>l'application Â« DonnÃ©e Â» interroge le service pour vÃ©rifier qu'un utilisateur
a payÃ© ou est abonnÃ©;</li>
<li>l'utilisateur interroge le service pour obtenir la liste de tous ses
abonnements.</li>
</ul>
<p>Seule l'application Â« Payment Â» a le droit de crÃ©er/modifier/supprimer des
enregistrements, les deux autres ne peuvent que consulter en lecture seule.</p>
<p>Une application donnÃ©e ne peut pas accÃ©der aux paiements des autres
applications, et un utilisateur ne peut pas accÃ©der aux paiements des autres
utilisateurs.</p>
<div class="section" id="avec-remotestorage">
<h3>Avec RemoteStorage</h3>
<img alt="Remote Love - CC-BY-NC Julie https://www.flickr.com/photos/mamajulie2008/2609549461" class="align-center" src="http://www.servicedenuages.fr/images/remote-love.jpg" style="width: 640px; height: auto; max-width: 100%;"/>
<p>Clairement, l'idÃ©e de <em>RemoteStorage</em> est de dissocier l'application executÃ©e,
et les donnÃ©es crÃ©Ã©es par l'utilisateur avec celle-ci.</p>
<p>Dans notre cas, c'est l'application Â« Payment Â» qui manipule des donnÃ©es
concernant un utilisateur. Mais celles-ci ne lui appartiennent pas directement:
certes un utilisateur doit pouvoir les supprimer, surtout pas en crÃ©er ou les
modifier!</p>
<p>La notion de permissions limitÃ©e Ã  privÃ©/publique ne suffit pas dans ce cas
prÃ©cis.</p>
</div>
<div class="section" id="avec-pouchdb">
<h3>Avec PouchDB</h3>
<p>Il va falloir crÃ©er une <em>base de donnÃ©es</em> par utilisateur, afin d'isoler les
enregistrements de faÃ§on sÃ©curisÃ©e.  Seule l'application Â« Payment Â» aura tous
les droits sur les databases.</p>
<p>Mais cela ne suffit pas.</p>
<p>Il ne faut pas qu'une application puisse voir les paiements des autres
applications, donc il va aussi falloir recloisonner, et crÃ©er une <em>base de
donnÃ©es</em> par application.</p>
<p>Quand un utilisateur voudra accÃ©der Ã  l'ensemble de ses paiements, il faudra
agrÃ©ger les <em>databases</em> de toutes les applications. Quand l'Ã©quipe marketing
voudra faire des statistiques sur l'ensemble des applications, il faudra
agrÃ©gÃ©r des centaines de milliers de <em>databases</em>.</p>
<p>Ce qui est fort dommage, puisqu'il est probable que les paiements ou
abonnements d'un utilisateur pour une application se comptent sur les doigts
d'une main. Des centaines de milliers de bases contenant moins de
5 enregistrements ?</p>
<p>De plus, dans le cas de l'application Â« Payment Â», le serveur est implÃ©mentÃ© en
Python. Utiliser un wrapper JavaScript comme le fait <a class="reference external" href="https://pythonhosted.org/Python-PouchDB/">python-pouchdb</a> cela ne nous fait pas trop rÃªver.</p>
</div>
</div>
<div class="section" id="un-nouvel-eco-systeme">
<h2>Un nouvel Ã©co-systÃ¨me ?</h2>
<img alt="Wagon wheel - CC-BY-NC-SA arbyreed https://www.flickr.com/photos/19779889@N00/16161808220" src="http://www.servicedenuages.fr/images/wagon-wheel.jpg" style="width: 640px; height: auto; max-width: 100%;"/>
<p>Ã‰videmment, quand on voit la richesse des projets <em>PouchDB</em> et <em>Remote Storage</em>
et la dynamique de ces communautÃ©s, il est lÃ©gitime d'hÃ©siter avant de
dÃ©velopper une solution alternative.</p>
<p>Quand nous avons crÃ©Ã© le serveur <em>Reading List</em>, nous l'avons construit avec
<a class="reference external" href="http://cliquet.readthedocs.org/">Cliquet</a>, ce fÃ»t l'occasion de mettre au
point <a class="reference external" href="http://cliquet.readthedocs.org/en/latest/api/">un protocole trÃ¨s simple</a>, fortement inspirÃ© de
<a class="reference external" href="http://en.wikipedia.org/wiki/Firefox_Sync">Firefox Sync</a>, pour faire de la
synchronisation d'enregistrements.</p>
<p>Et si les clients <em>Reading List</em> ont pu Ãªtre implÃ©mentÃ©s en quelques semaines,
que ce soit en JavaScript, Java (Android) et ASM (Add-on Firefox), c'est que le
principe Â«<em>offline first</em>Â» du service est trivial.</p>
<div class="section" id="les-compromis">
<h3>Les compromis</h3>
<p>Ã‰videmment, nous n'avons pas la prÃ©tention de concurrencer <em>CouchDB</em>. Nous faisons plusieurs
concessions:</p>
<ul class="simple">
<li>De base, les collections d'enregistrements sont cloisonnÃ©es par utilisateur;</li>
<li>Pas d'historique des rÃ©visions;</li>
<li>Pas de diff sur les enregistrements entre rÃ©visions;</li>
<li>De base, pas de rÃ©solution de conflit automatique;</li>
<li>Pas de synchronisation par flux (<em>streams</em>);</li>
</ul>
<p>Jusqu'Ã  preuve du contraire, ces compromis excluent la possibilitÃ©
d'implÃ©menter un <a class="reference external" href="https://github.com/pouchdb/pouchdb/blob/master/lib/adapters/http/http.js#L721-L946">adapter PouchDB</a>
pour la synchronisation avec le protocole HTTP de <em>Cliquet</em>.</p>
<p>Dommage puisque capitaliser sur l'expÃ©rience client de <em>PouchDB</em> au niveau
synchro client semble Ãªtre une trÃ¨s bonne idÃ©e.</p>
<p>En revanche, nous avons plusieurs fonctionnalitÃ©s intÃ©ressantes:</p>
<ul class="simple">
<li>Pas de map-reduce;</li>
<li>Synchronisation partielle et/ou ordonnÃ©e et/ou paginÃ©e    ;</li>
<li>Le client choisit, via des headers, d'Ã©craser la donnÃ©e ou de respecter la version du serveur ;</li>
<li>Un seul serveur Ã  dÃ©ployer pour N applications ;</li>
<li>Auto-hÃ©bergement simplissime ;</li>
<li>Le client peut choisir de ne pas utiliser de Â« store local Â» du tout ;</li>
<li>Dans le client JS, la gestion du Â« store local Â» sera externalisÃ©e (on pense
Ã  <a class="reference external" href="https://github.com/mozilla/localForage">LocalForage</a> ou <a class="reference external" href="https://github.com/dfahlander/Dexie.js">Dexie.js</a>) ;</li>
</ul>
<p>Et, on rÃ©pond au reste des <a class="reference external" href="#storage-specs">specifications mentionnÃ©es au dÃ©but de l'article</a> !</p>
</div>
<div class="section" id="les-arguments-philosophiques">
<h3>Les arguments philosophiques</h3>
<p>Il est <a class="reference external" href="http://en.wikipedia.org/wiki/Law_of_the_instrument">illusoire de penser qu'on peut tout faire avec un seul outil</a>.</p>
<p>Nous avons d'autres cas d'utilisations dans les cartons qui semblent correspondre au scope de <em>PouchDB</em>
(<em>pas de notion de permissions ou de partage, environnement JavaScript, ...</em>). Nous saurons en tirer
profit quand cela s'avÃ¨rera pertinent !</p>
<p>L'Ã©co-systÃ¨me que nous voulons construire tentera de couvrir les cas d'utilisation
qui sont mal adressÃ©s par <em>PouchDB</em>. Il se voudra:</p>
<ul class="simple">
<li>BasÃ© sur notre protocole trÃ¨s simple ;</li>
<li>Minimaliste et multi-usages (<em>comme la fameuse 2CV</em>) ;</li>
<li>NaÃ¯f (<em>pas de rocket science</em>) ;</li>
<li>Sans magie (<em>explicite et facile Ã  rÃ©implÃ©menter from scratch</em>) ;</li>
</ul>
<p><a class="reference external" href="http://cliquet.readthedocs.org/en/latest/rationale.html">La philosophie et les fonctionnalitÃ©s du toolkit python Cliquet</a> seront bien entendu
Ã  l'honneur :)</p>
<p>Quant Ã  <em>Remote Storage</em>, dÃ¨s que le besoin se prÃ©sentera, nous serons trÃ¨s fier
de rejoindre l'initiative, mais pour l'instant cela nous paraÃ®t risquÃ© de dÃ©marrer
en tordant la solution.</p>
</div>
<div class="section" id="les-arguments-pratiques">
<h3>Les arguments pratiques</h3>
<p>Avant d'accepter de dÃ©ployer une solution Ã  base de <em>CouchDB</em>, les <em>ops</em> de Mozilla
vont nous demander de leur prouver par A+B que ce n'est pas faisable avec
les stacks qui sont dÃ©jÃ  rodÃ©es en interne (i.e. MySQL, Redis, PostgreSQL).</p>
<p>De plus, on doit s'engager sur une pÃ©rennitÃ© d'au moins 5 ans pour les donnÃ©es.
Avec <em>Cliquet</em>, en utilisant le backend PostgreSQL, les donnÃ©es sont persistÃ©es
Ã  plat dans un <a class="reference external" href="https://github.com/mozilla-services/cliquet/blob/40aa33/cliquet/storage/postgresql/schema.sql#L14-L28">schÃ©ma PostgreSQL tout bÃªte</a>.
Ce qui ne sera pas le cas d'un adapteur LevelDown qui va manipuler des notions
de rÃ©visions Ã©clatÃ©es dans un schÃ©ma clÃ©-valeur.</p>
<p>Si nous basons le service sur <em>Cliquet</em>, comme c'est le cas avec <a class="reference external" href="http://kinto.readthedocs.org">Kinto</a>,
tout le travail d'automatisation de la mise en production (<em>monitoring,
builds RPM, Puppet...</em>) que nous avons fait pour <em>Reading List</em> est
complÃ¨tement rÃ©utilisable.</p>
<p>De mÃªme, si on repart avec une stack complÃ¨tement diffÃ©rente, nous allons
devoir recommencer tout le travail de rodage, de profiling et d'optimisation
effectuÃ© au premier trimestre.</p>
</div>
</div>
<div class="section" id="les-prochaines-etapes">
<h2>Les prochaines Ã©tapes</h2>
<p>Et il est encore temps de changer de stratÃ©gie :) Nous aimerions avoir un
maximum de retours !  C'est toujours une dÃ©cision difficile Ã  prendre...
<tt class="docutils literal">&lt;/appel Ã  troll&gt;</tt></p>
<ul class="simple">
<li>Tordre un Ã©co-systÃ¨me existant vs. constuire sur mesure ;</li>
<li>MaÃ®triser l'ensemble vs. s'intÃ©grer ;</li>
<li>Contribuer vs. refaire ;</li>
<li>Guider vs. suivre.</li>
</ul>
<p>Nous avons vraiment l'intention de rejoindre l'initiative <a class="reference external" href="https://nobackend.org/">no-backend</a>, et ce premier pas n'exclue pas que nous convergions
Ã  terme ! Peut-Ãªtre que nous allons finir par rendre notre service compatible
avec <em>Remote Storage</em>, et peut-Ãªtre que <em>PouchDB</em> deviendra plus agnostique
quand au protocole de synchronisation...</p>
<img alt="XKCD â€” Standards https://xkcd.com/927/" src="http://www.servicedenuages.fr/images/standards.png" style="width: 500px; height: auto; max-width: 100%;"/>
<p>Utiliser ce nouvel Ã©cosystÃ¨me pour le projet Â« Payments Â» va nous permettre de
mettre au point un systÃ¨me de permissions (<em>probablement basÃ© sur les scopes OAuth</em>) qui
correspond au besoin exprimÃ©. Et nous avons bien l'intention de puiser dans
<a class="reference external" href="http://blog.daybed.io/daybed-revival.html">notre expÃ©rience avec Daybed sur le sujet</a>.</p>
<p>Nous extrairons aussi le code des clients implÃ©mentÃ©s pour <em>Reading List</em> afin
de faire un client JavaScript minimaliste.</p>
<p>En partant dans notre coin, nous prenons plusieurs risques:</p>
<ul class="simple">
<li>rÃ©inventer une roue dont nous n'avons pas connaissance ;</li>
<li>Ã©chouer Ã  faire de l'Ã©co-systÃ¨me <em>Cliquet</em> un projet communautaire ;</li>
<li>Ã©chouer Ã  positionner <em>Cliquet</em> dans la niche des cas non couverts par PouchDB :)</li>
</ul>
<p>Comme <a class="reference external" href="http://pouchdb.com/2015/04/05/filtered-replication.html">le dit Giovanni Ornaghi</a>:</p>
<blockquote>
Rolling out your set of webservices, push notifications, or background services
might give you more control, but at the same time it will force you to engineer,
write, test, and maintain a whole new ecosystem.</blockquote>
<p>C'est justement l'Ã©co-systÃ¨me dont est responsable l'Ã©quipe <em>Mozilla Cloud Services</em>!</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label"></col><col></col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Il existe le <a class="reference external" href="https://sharesome.5apps.com/">projet Sharesome</a> qui
permet de partager publiquement des ressources de son <em>remote Storage</em>.</td></tr>
</tbody>
</table>
</div>

            <div class="hr"></div>
            <a href="#" class="go-top">Revenir au dÃ©but</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "servicedenuages"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div><footer class="footer">
    <p>&copy; Service de nuages &ndash;
        DÃ©veloppÃ© avec <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        et <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
</body>
</html>