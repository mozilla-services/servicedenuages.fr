<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Service de nuages, ">

        <link rel="alternate"  href="http://www.servicedenuages.fr/feeds/all.atom.xml" type="application/atom+xml" title="Service de nuages Full Atom Feed"/>

        <title>Service de nuages ! // Service de nuages // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pure.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <h5>Publi√©</h5>
                <p title="~627 mots">~3mn de lecture üïë</p>
                <p>jeu. 16 avril 2015</p>
                <a href="/">&larr;Liste des articles</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Service de nuages !</h1>
                </header>
            </section>
                        <p><a href="http://www.servicedenuages.fr/en/service-de-nuages">Read the English version</a></p>
            <p>Pas mal de changements depuis le d√©but de l'ann√©e pour l'√©quipe
¬´cloud-services¬ª francophone!</p>
<p>Tout d'abord, nouvelle importante, l'√©quipe s'√©toffe avec des profils assez
compl√©mentaires: <a class="reference external" href="https://nicolas.perriault.net/">n1k0</a> et <a class="reference external" href="http://mathieu-leplatre.info">Mathieu</a> sont venus pr√™ter main forte √† <a class="reference external" href="http://ziade.org/">Tarek</a>, <a class="reference external" href="http://natim.ionyse.com">R√©my</a> et <a class="reference external" href="http://notmyidea.org">Alexis</a>.</p>
<p>Le d√©but de l'ann√©e a vu le lancement de <a class="reference external" href="https://www.mozilla.org/en-US/firefox/hello/">Firefox Hello</a> ce qui nous a permis de passer
√† l'√©chelle <a class="reference external" href="https://github.com/mozilla-services/loop-server">le serveur</a>,
√©crit en Node.js¬Æ, pour l'occasion.</p>
<div class="section" id="un-serveur-de-listes-de-lecture">
<h2>Un serveur de listes de lecture</h2>
<p>En parall√®le, un projet de <a class="reference external" href="https://readinglist.readthedocs.org">synchronisation de liste de lecture</a> (<em>Reading List</em>) a vu le jour.  L'id√©e
√©tant de pouvoir marquer des pages "√† lire pour plus tard" et de continuer la
lecture sur n'importe quel p√©riph√©rique synchronis√© (Firefox pour Android ou
Firefox Desktop). Un √©quivalent libre √† <a class="reference external" href="http://getpocket.com">Pocket</a> en quelque sorte, qu'il est
possible d'h√©berger soit-m√™me.</p>
<img alt="Capture d'√©cran de Firefox nightly avec readinglist." src="http://www.servicedenuages.fr/images/readinglist-screenshot.png" style="width: 953px; height: auto; max-width: 100%;"/>
<p>Pour le construire, nous aurions pu r√©utiliser <a class="reference external" href="https://github.com/mozilla-services/server-syncstorage">Firefox Sync</a>, apr√®s tout
c'est un service de synchronisation de donn√©es tr√®s robuste, construit avec <a class="reference external" href="http://cornice.readthedocs.org/">Cornice</a>.
Mais seulement, <em>Sync</em> n'a pas √©t√© pens√© pour garantir la p√©rennit√© des donn√©es,
et la marche √©tait trop haute pour changer √ßa en profondeur.</p>
<p>Nous aurions pu aussi nous contenter de faire une √©ni√®me application qui expose
une API et persiste des donn√©es dans une base de donn√©es.</p>
<p>Mais cette nouvelle petite √©quipe n'est pas l√† par hasard :)</p>
</div>
<div class="section" id="la-daybed-team">
<h2>La ¬´Daybed Team¬ª</h2>
<p>On partage une vision: un service g√©n√©rique de stockage de donn√©es ! Peut-√™tre
que √ßa vous rappelle <a class="reference external" href="https://daybed.io">un certain projet nomm√© Daybed</a> ?
Pour les applications clientes, JavaScript, mobiles ou autres, l'utilisation de
ce service doit √™tre un jeu d'enfant ! L'application g√®re ses donn√©es
localement (aka offline-first), et synchronise √† la demande.</p>
<p>Ici, le c≈ìur du serveur <em>Reading List</em> est justement une API "CRUD" (Create,
Retrieve, Update, Delete), qui g√®re de la synchronisation et de
l'authentification. Nous avons donc pris le parti de faire une API "simple",
avec le moins de sp√©cificit√©s possible, qui poserait les bases d'un service
g√©n√©rique. Notamment parce qu'il y a d'autres projets dans la m√™me trempe qui vont suivre.</p>
<p>Pas mal d'exp√©rience ayant √©t√© accumul√©e au sein de l'√©quipe, avec d'une part la
cr√©ation de <em>Firefox Sync</em>, et d'autre part avec <em>Daybed</em>, notre side-project, nous
tentons de ne pas reproduire les m√™mes erreurs, tout en gardant les concepts
qui ont fait leurs preuves.</p>
<p>Par exemple, nous avons conserv√© le m√©canisme de collections d'enregistrements
et de <em>timestamp</em> de <em>Sync</em>. Comme ces probl√©matiques sont r√©currentes, voire
incontournables, nous avons d√©cid√© de reprendre le protocole de synchronisation,
de l'√©tendre l√©g√®rement et surtout de le dissocier du projet de listes de lecture.</p>
</div>
<div class="section" id="le-mecanisme-qui-force-a-aller-de-l-avant">
<h2>Le m√©canisme qui force √† aller de l'avant</h2>
<p>Comme premi√®re pierre √† l'√©difice, nous avons donn√© naissance au projet
<a class="reference external" href="https://cliquet.readthedocs.org">Cliquet</a>, dont l'id√©e principale est de
fournir une impl√©mentation de ce protocole en python, tout en factorisant
l'ensemble de nos bonnes pratiques (pour la prod notamment).</p>
<img alt="Logo du projet Cliquet" class="align-right" src="http://www.servicedenuages.fr/images/cliquet-logo.png" style="width: 300px; height: auto; max-width: 100%;"/>
<p>L'avantage d'avoir un protocole plut√¥t qu'un monolithe, c'est que si vous
pr√©f√©rez Asyncio, io.js ou Go, on vous encouragera √† publier votre
impl√©mentation alternative !</p>
<p>Avec <em>Cliquet</em>, le code du serveur liste de lecture consiste principalement
√† d√©finir un sch√©ma pour les enregistrements, puis √† forcer des valeurs de
champs sur certains appels. Cela r√©duit ce projet √† quelques dizaines de lignes
de code.</p>
<p>Quant au futur service de stockage g√©n√©rique, <a class="reference external" href="http://kinto.readthedocs.org">le projet</a> en est encore √† ses balbutiements mais c'est
bel et bien en route ! Il permet d√©j√† d'√™tre branch√© comme backend de stockage
dans une application <em>Cliquet</em>, et √ßa <a class="reference external" href="https://github.com/mozilla-services/kinto/blob/0.2.1/kinto/views/collection.py">impl√©ment√© en 20 lignes de code</a>!</p>
<p>Ah, et cette fois, nous ne construirons les fonctionnalit√©s qu'√† partir des
besoins concrets qui surviennent. √áa para√Æt tout b√™te, mais sur <em>Daybed</em> on
l'a pas vu venir :)</p>
<p>Dans les prochains articles, nous avons pr√©vu de d√©crire les bonnes pratiques
rassembl√©es dans le protocole (ou <em>Cliquet</em>), certains points techniques pr√©cis
et de vous pr√©senter notre vision via des exemples et tutoriaux.</p>
<p>√Ä bient√¥t, donc !</p>
</div>

            <div class="hr"></div>
            <a href="#" class="go-top">Revenir au d√©but</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "servicedenuages"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div><footer class="footer">
    <p>&copy; Service de nuages &ndash;
        D√©velopp√© avec <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        et <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.notmyidea.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.notmyidea.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->
  <script src="http://www.servicedenuages.fr/theme/js/instantclick.min.js" data-no-instant></script>
  <script data-no-instant>InstantClick.init();</script>
</body>
</html>